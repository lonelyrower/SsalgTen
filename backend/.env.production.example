# Production Environment Configuration Example
# Copy this file to .env and fill in the values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://ssalgten:STRONG_PASSWORD_HERE@localhost:5432/ssalgten

# Individual PostgreSQL settings (used for Docker and other tools)
POSTGRES_USER=ssalgten
POSTGRES_PASSWORD=STRONG_PASSWORD_HERE
POSTGRES_DB=ssalgten
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Secret Key
# CRITICAL: Must be at least 32 characters and randomly generated
# Generate with: openssl rand -base64 48
# Example: ab12cd34ef56gh78ij90kl12mn34op56qr78st90uv12wx34yz56
JWT_SECRET=REPLACE_WITH_STRONG_RANDOM_SECRET_MIN_32_CHARS
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d

# API Key Secret for Agent Authentication
# Generate with: openssl rand -base64 32
API_KEY_SECRET=REPLACE_WITH_STRONG_RANDOM_SECRET

# Default Agent API Key (used for initial agent registration)
# Generate with: openssl rand -hex 32
DEFAULT_AGENT_API_KEY=REPLACE_WITH_STRONG_RANDOM_KEY

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Allowed origins for cross-origin requests
# Multiple origins: https://yourdomain.com,https://www.yourdomain.com
# Wildcard subdomain: https://*.yourdomain.com
# HTTPS only: https://*
CORS_ORIGIN=https://yourdomain.com

# =============================================================================
# REDIS CONFIGURATION (Optional but recommended for production)
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_URL=redis://localhost:6379

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
AGENT_HEARTBEAT_INTERVAL=30000
AGENT_TIMEOUT=10000
AGENT_OFFLINE_THRESHOLD=90000
AGENT_REQUIRE_SIGNATURE=false

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
ENABLE_MORGAN=false

# =============================================================================
# NETWORK DIAGNOSTIC DEFAULTS
# =============================================================================
DEFAULT_PING_COUNT=4
DEFAULT_TRACEROUTE_MAX_HOPS=30
MTR_COUNT=10
SPEEDTEST_SERVER_ID=auto

# =============================================================================
# SYSTEM CONFIGURATION
# =============================================================================
TRUST_PROXY=true
ENABLE_SYSTEM_METRICS=true
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
SOCKET_PING_TIMEOUT=60000
SOCKET_PING_INTERVAL=25000

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL=300000

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# IPInfo.io API Token (for IP geolocation)
# Free tier: 50,000 requests/month
# Sign up at: https://ipinfo.io
# IPINFO_TOKEN=your-ipinfo-token-here

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# [ ] JWT_SECRET is at least 32 characters and randomly generated
# [ ] API_KEY_SECRET is strong and randomly generated
# [ ] DEFAULT_AGENT_API_KEY is unique and randomly generated
# [ ] POSTGRES_PASSWORD is at least 12 characters
# [ ] CORS_ORIGIN is set to your actual domain (not wildcard in production)
# [ ] All "REPLACE_WITH_*" placeholders are replaced
# [ ] No weak values like "secret", "changeme", "test", "default-secret"
# [ ] Redis password is set if using Redis
# [ ] Log level is set to "info" or "warn" (not "debug")
# [ ] Backup and disaster recovery procedures are in place

# =============================================================================
# QUICK SETUP COMMANDS
# =============================================================================
# Generate strong secrets:
#   JWT_SECRET:           openssl rand -base64 48
#   API_KEY_SECRET:       openssl rand -base64 32
#   DEFAULT_AGENT_API_KEY: openssl rand -hex 32
#   POSTGRES_PASSWORD:    openssl rand -base64 24